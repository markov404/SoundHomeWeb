
{% extends 'common_app/index.html' %}

{% block haeders %}

    {{ block.super }}

    {% block title %}
    <title> {{ data.album_title }} </title>
    {% endblock title %}

    {% block media %}
    {% load static %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    
    <link rel="stylesheet" href="{% static 'css/navbar.css' %}">
    <link rel="stylesheet" href="{% static 'css/footer.css' %}">  
    <link rel="stylesheet" href="{% static 'css/review_style.css' %}">

    
    {% endblock media %}

{% endblock haeders %}

{% block body %}

    {% block navbar %}
        {{ block.super }}
    {% endblock navbar %}

    {% block review_navbar %}
    <div class="container ReviewNav">
        <div class="row">
            <div class="col">

            </div>
            <div class="col">
                <div class="d-flex mb-3">
                    <div class="p-2">
                        <a href="{% url 'ceraint_review' additional_info.prev_id %}"  class='lnk_rv_nav' id='lnk_prv'> Prev </a>
                    </div>
                    <div class="ms-auto p-2">
                        <a href="{% url 'ceraint_review' additional_info.next_id %}" class='lnk_rv_nav' id='lnk_nxt'> Next </a>
                    </div>
                </div>
            </div>
            <div class="col">

            </div>
        </div>
    </div>
    {% endblock review_navbar %}

    {% block content %}

    <div class="container-fluid" id="review">
    <div class="row">
        <div class="col">
        </div>
        <div class="col-9">
            <div class="clearfix">
                <div class="col-md-6 float-md-end mb-3 ms-md-3 text-center ReviewShort" alt="...">
                    <div class="ReviewAlbNdScore">
                    <h2 id="alb_ttl"> {{ data.album_title }}</h2>
                    <h4 id="alb_athr"> {{ data.album_author }}</h4>
                    <h1 id="alb_score"> {{ data.album_score }} </h1> <p id="alb_year"> {{ data.album_year}} </p>
                    </div>
                    <div class="ReviewImg">
                    <img id="alb_img" src='{{ data.image_src }}' width="350px"/>
                    </div>
                </div>
                
                <div class="ReviewTitle">
                    <h2> {{ data.review_title }} </h2> 
                </div>

                <div class="ReviewText">
                    <p id="rvw_txt"> 
                        {{ data.review_text }}
                    </p>
                </div>

            </div>
        </div>
        <div class="col">
        </div>
    </div>
    </div>

    {% endblock content %}
    
    {% block footer %}
        {{ block.super }}
    {% endblock footer %}

    {% block scripts %}
        {{ block.super }}

        <script>
            let txt_container = document.getElementById('rvw_txt')
            let txt = txt_container.innerHTML
            txt_container.innerHTML = ""

            var result = txt.match( /[^\.!\?]+[\.!\?]+/g );
            
            let output = ""
            let counter = 0
            result.forEach(function (el) {
                if (counter == 0) {
                    output = output + "<p class='abzac'>" + el
                    counter = counter + 1
                }
                else if (counter == 10) {
                    output = output + el + "</p>"
                    counter = 0
                } else {
                    output = output + el
                    counter = counter + 1
                }
            })
            txt_container.innerHTML = output
            console.log(result)
        </script>

    {% endblock scripts %}


{% endblock body %}

